---
import "../styles/global.css";
import { Icon } from "astro-icon/components";
---

<!-- NAV BAR -->
<nav
    class="sticks md:relative h-[4rem] md:h-[2.7rem] top-3 left-0 right-0 border-b-0 z-50 max-sm:px-5"
>
    <div class="container mx-auto py-2 md:py-1">
        <div class="grid grid-cols-3 items-center py-[6px]">
            <a href="/" class="flex items-center">
                <Icon
                    name="logo/logo"
                    class="icon-medium w-6 h-6"
                    aria-label="logo"
                />
            </a>

            <!-- Mobile menu button -->
            <div class="md:hidden col-start-3 justify-self-end">
                <button
                    id="mobileMenuButton"
                    class="p-2 text-gray-700 dark:text-gray-200 rounded-md hover:text-indigo-700 focus:outline-none"
                >
                    <svg
                        id="menuOpen"
                        xmlns="http://www.w3.org/2000/svg"
                        class="w-6 h-6"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                        stroke-width="2"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                    <svg
                        id="menuClose"
                        xmlns="http://www.w3.org/2000/svg"
                        class="w-6 h-6 hidden"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                        stroke-width="2"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Desktop navigation -->
            <div class="hidden md:flex justify-end col-start-3">
                <div class="flex space-x-8 uppercase text-[10px]">
                    <a class="font-normal hover:text-blue-600" href="/">Data</a>

                    <div class="relative group">
                        <button
                            class="font-normal uppercase text-[10px] hover:text-blue-600"
                            >Other</button
                        >

                        <!-- Subnav container - full width, positioned absolutely -->
                        <div
                            class="absolute right-0 top-full bg-transparent overflow-hidden h-0 group-hover:h-auto transition-all duration-900 w-fit"
                        >
                            <div class="container mx-auto">
                                <!-- Subnav content - right-aligned links -->
                                <div class="flex justify-end space-x-4 py-3">
                                    <a
                                        class="font-normal hover:text-blue-600"
                                        href="/overview_viz#viz"
                                        >Visualizations</a
                                    >
                                    <span class="text-gray-400">|</span>
                                    <a
                                        class="font-normal hover:text-blue-600"
                                        href="/overview_viz#design">Design</a
                                    >
                                    <span class="text-gray-400">|</span>

                                    <a
                                        class="font-normal hover:text-blue-600"
                                        href="/overview_viz#writing">Writing</a
                                    >
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mobile menu (unchanged) -->
        <div
            id="mobileMenu"
            class="fixed inset-0 z-50 bg-black bg-opacity-10 justify-end hidden transition-all duration-300"
        >
            <div id="menuOverlay" class="absolute inset-0"></div>
            <div
                class="relative w-1/3 bg-white dark:bg-gray-900 h-full shadow-md flex flex-col justify-start"
            >
                <button
                    id="mobileMenuCloseButton"
                    class="self-end m-4 p-2 text-gray-700 dark:text-gray-200 hover:text-indigo-700"
                >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="w-6 h-6"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                        stroke-width="2"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
                <div>
                    <a
                        href="/index.html"
                        class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:text-indigo-700"
                        >Data</a
                    >
                    <a
                        href="/overview_viz.html"
                        class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:text-indigo-700"
                        >Visualizations</a
                    >
                    <hr class="my-2 border-gray-300 dark:border-gray-700" />
                    <a
                        href="/impressum.html"
                        class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:text-indigo-700"
                        >Impressum</a
                    >
                    <a
                        href="/privacypolicy.html"
                        class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:text-indigo-700"
                        >Privacy Policy</a
                    >
                </div>
            </div>
        </div>
    </div>
</nav>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const mobileMenuButton = document.getElementById("mobileMenuButton");
        const mobileMenu = document.getElementById("mobileMenu");
        const menuOverlay = document.getElementById("menuOverlay");
        const mobileMenuCloseButton = document.getElementById(
            "mobileMenuCloseButton",
        );
        const menuOpen = document.getElementById("menuOpen");
        const menuClose = document.getElementById("menuClose");

        if (
            mobileMenuButton &&
            mobileMenu &&
            menuOverlay &&
            mobileMenuCloseButton &&
            menuOpen &&
            menuClose
        ) {
            mobileMenuButton.addEventListener("click", () => {
                mobileMenu.classList.remove("hidden");
                menuOpen.classList.add("hidden");
                menuClose.classList.remove("hidden");
            });

            const closeMenu = () => {
                mobileMenu.classList.add("hidden");
                menuOpen.classList.remove("hidden");
                menuClose.classList.add("hidden");
            };

            menuOverlay.addEventListener("click", closeMenu);
            mobileMenuCloseButton.addEventListener("click", closeMenu);
        }
    });
</script>
