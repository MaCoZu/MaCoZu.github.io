<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="./d3.v7.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <!-- Favicon -->
    <link rel="icon" href="./img/logo/logo_weiß.svg" type="image/x-icon" />

    <title>Happy and Sustainable?</title>

    <style>
        /* MENU */
        .font-work {
            font-family: 'Poppins', sans-serif;
        }

        /* TEXT */
        .font-literata {
            font-family: 'Literata', serif;
        }

        /* HIGHLIGHT  */
        .font-bebas {
            font-family: 'Bebas', sans-serif;
        }

        #rect-container {
            fill: #F0F0F1;
        }

        #ref-label {
            fill: rgba(18, 100, 18, 0.867);
        }

        #ref-line {
            stroke: darkolivegreen;
        }

        .year-button {
            background-color: #ffffff49;
            border: 2px solid rgba(158, 28, 28, 0.1);
            border-radius: .25rem;
            box-shadow: rgba(0, 0, 0, 0.02) 0 1px 3px 0;
            padding: 4px 20px;
            font-size: 16px;
            font-weight: 600;
            align-items: center;
            box-sizing: border-box;
            color: rgba(0, 0, 0, 0.85);
            cursor: pointer;
            display: inline-flex;
            justify-content: center;
            line-height: 1.25;
            margin: 0;
            min-height: 3rem;
            position: relative;
            text-decoration: none;
            transition: all 250ms;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
            vertical-align: baseline;
            width: 80px;
        }

        .year-button:hover,
        .year-button:focus {
            border-color: rgba(0, 0, 0, 0.15);
            box-shadow: rgba(0, 0, 0, 0.1) 0 4px 12px;
            color: rgba(0, 0, 0, 0.65);
        }

        .year-button:hover {
            transform: translateY(-1px);
        }

        .year-button:active {
            background-color: #F0F0F1;
            border-color: rgba(0, 0, 0, 0.15);
            box-shadow: rgba(0, 0, 0, 0.06) 0px 2px 4px;
            color: rgba(237, 225, 225, 0.65);
            transform: translateY(0);
        }

        circle {
            stroke: rgba(22, 22, 22, 0.386);
        }

        /* New styles for country filter */
        #country-filter-container {
            margin-top: 20px;
            width: 220px;
        }

        #country-search {
            width: 100%;
            padding: 5px;
            margin-bottom: 10px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }

        #country-list {
            max-height: 220px;
            overflow-y: auto;
            border: 1px solid #ccc;
            border-radius: 4px;
            padding: 5px;
        }

        .country-checkbox {
            display: block;
            margin-bottom: 5px;
            /* border: 1px solid #ccc; */
            display: flex;
            align-items: center;
            font-size: 14px;
        }

        .country-checkbox input[type="checkbox"] {
            display: block;
            padding: 2px;
            width: 12px;
            height: 12px;
            margin-left: 6px;
            margin-right: 6px;
        }

        /* Hover state for the label */
        .country-checkbox:hover {
            color: #007bff;
            /* Change text color on hover */
            cursor: pointer;
        }

        /* Checked state (change color when active) */
        .country-checkbox input[type="checkbox"]:checked+label {
            color: #28a745;
            /* Green when checked */
        }

        /* Checkbox hover and active styles */
        .country-checkbox input[type="checkbox"]:hover {
            border: 2px solid #007bff;
            /* Change border on hover */
        }

        @media (prefers-color-scheme: dark) {
            #logo {
                filter: invert(100%);
            }

            body {
                background-color: rgb(17 24 39);
                color: rgb(229 231 235);
            }

            #container {
                background-color: rgb(17 24 39);
            }

            #chart-container {
                background-color: rgb(17 24 39);
            }

            #svg-container {
                background-color: rgb(17 24 39);
            }

            #g-container {
                background-color: rgb(17 24 39);
            }

            #rect-container {
                fill: rgb(17 24 39);
            }

            text {
                fill: #fff;
            }

            #ref-line {
                stroke: lightgreen;
            }

            #ref-label {
                fill: lightgreen;
            }

            button {
                color: #fff;
                background-color: rgba(76, 117, 199, 0.247);
                border: rgba(237, 235, 245, 0.76);
                box-shadow: rgba(199, 211, 235, 0.43) 0 1px 3px 0;
            }

            button:hover,
            button:focus {
                border-color: rgba(87, 102, 232, 0.15);
                box-shadow: rgba(0, 0, 0, 0.1) 0 4px 12px;
                box-shadow: inset rgba(218, 214, 214, 0.288) 0px 2px 3px;
                color: rgba(84, 136, 240, 0.886);
            }

            button:active {
                background-color: #646496;
                border-color: rgba(190, 157, 157, 0.207);
                box-shadow: inset rgba(218, 214, 214, 0.288) 0px 2px 3px;
                color: #fff;
            }

            circle {
                stroke: rgba(255, 255, 255, 0.671);
            }

            #country-search,
            #country-list {
                background-color: rgb(30 41 59);
                color: rgb(229 231 235);
                border-color: rgb(75 85 99);
            }
        }

        #heading {
            font-size: 40px;
            font-family: 'Literata', sans-serif;
            margin-bottom: 0px;
            position: absolute;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
        }

        #chart-container {
            display: flex;
            align-items: flex-start;
            margin-top: 10px;
        }

        .tooltip {
            font-size: 12px;
            font-weight: normal;
            position: absolute;
            padding: 10px;
            text-align: left;
            background: rgba(0, 0, 0, 0.805);
            border: 0.5px solid #cccccc71;
            border-radius: 5px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            color: #FFF;
        }

        .tooltip td {
            padding: 1.7px 5px;
        }

        text {
            font-size: 16px;
            font-weight: 400;
        }

        /* New style for Select All option */
        #select-all-container {
            margin-bottom: 10px;
            font-weight: bold;
        }
    </style>


    <!-- Fonts -->
    <link rel="stylesheet" href="../font.css">

    <!-- css  -->
    <link rel="stylesheet" href="../style.css">
</head>

<body class="font-work mx-6 md:mx-0 bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-200">

    <!-- NAV BAR -->
    <nav x-data="{ isOpen: false }" class="sticks md:relative h-[4rem] md:h-[2.7rem] top-0 left-0 right-0 border-b-0 z-50">
        <div class="container mx-auto py-2 md:py-1">
            <!-- Navbar Grid -->
            <div class="grid grid-cols-3 items-center md:mx-[10.5rem] py-[6px]">
    
                <!-- LOGO -->
                <a href="index.html" class="flex items-center">
                    <img id="logo" class="h-6 sm:h-6 dark:filter-white" src="./img/logo/logo.svg" alt="logo">
                </a>
    
                <!-- MOBILE MENU BUTTON -->
                <div class="md:hidden col-start-3 justify-self-end">
                    <button @click="isOpen = !isOpen"
                        class="p-2 text-gray-500 dark:text-gray-200 rounded-md hover:text-indigo-700 focus:outline-none">
                        <svg x-show="!isOpen" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                        <svg x-show="isOpen" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
    
                <!-- DESKTOP MENU -->
                <div class="hidden md:flex justify-end col-start-3">
                    <div class="flex space-x-6 uppercase text-[10px]">
                        <a class="font-medium hover:text-indigo-700" href="index.html">Data</a>
                        <a class="font-medium hover:text-indigo-700" href="overview_viz.html">Visualizations</a>
                    </div>
                </div>
            </div>
    
            <!-- MOBILE MENU  -->
            <div x-show="isOpen" x-transition class="fixed inset-0 z-50 bg-black bg-opacity-10 flex justify-end">
    
                <!-- Wrapper to Detect Clicks -->
                <div @click="isOpen = false" class="absolute inset-0"></div>
    
                <!-- Menu Content -->
                <div class="relative w-1/3 bg-white dark:bg-gray-900 h-full shadow-md flex flex-col justify-start">
                    <!-- Close Button -->
                    <button @click="isOpen = false"
                        class="self-end m-4 p-2 text-gray-500 dark:text-gray-200 hover:text-indigo-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
    
                    <!-- Links -->
                    <div>
                        <a href="index.html"
                            class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:text-indigo-700">Data</a>
                        <a href="overview_viz.html"
                            class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:text-indigo-700">Visualizations</a>
    
                        <hr class="my-2 border-gray-300 dark:border-gray-700">
                        <a href="impressum.html"
                            class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:text-indigo-700">Impressum</a>
                        <a href="privacypolicy.html"
                            class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:text-indigo-700">Privacy
                            Policy</a>
                    </div>
                </div>
            </div>
    </nav>

    <div class="md:h-15"></div>

    <!-- D3 Chart  -->
    <div class="mt-10 flex flex-col items-center text-center canva"></div>

    <main class="flex justify-center items-center min-h-screen">
        <article id="article"
            class="w-5/6 px-1 font-literata md:w-1/2 max-w-full prose md:prose-xl prose-stone text-pretty leading-10 dark:prose-invert">

            <!-- title  -->
            <!-- <h1 class="text-left leading-snug">From Scatterplot to Regression Line</h1> -->

            Helliwell, J., Layard, R., & Sachs, J. (2019). World Happiness Report 2019, New York: Sustainable
            Development Solutions <br><br>
            Helliwell, John F., Richard Layard, and Jeffrey Sachs, eds. 2015. World Happiness Report 2015. New York:
            Sustainable Development Solutions Network.

            </div>
        </article>
    </main>

    <!-- footer  -->
    <hr class="mt-20 border-gray-200 dark:border-gray-700 md:mx-[10.5rem]">
    
    <footer class="bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-200 mx-auto md:mx-[10.5rem] mb-5">
        <div class="container">
    
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-5">
    
                <!-- Logo and Name  -->
                <div class="">
                    <div class="hidden md:block">
                        <div class="flex justify-between items-center">
                            <div class="flex gap-3 items-center">
                                <a>
                                    <img id="logo2" class="h-16 fill-current" src="./img/logo/logo.svg" alt="">
                                </a>
                                <div class="">
                                    <p
                                        class="pb-3 text-lg font-literata font-semibold tracking-widest uppercase rounded-lg focus:outline-none focus:shadow-outline">
                                        Marco</p>
                                    <p
                                        class="text-lg font-literata font-semibold tracking-widest uppercase rounded-lg focus:outline-none focus:shadow-outline">
                                        Zausch</p>
                                </div>
                            </div>
                        </div>
                    </div>
    
    
                </div>
    
                <div class="flex flex-col sm:flex-row sm:gap-24 md:justify-between ">
    
                    <!-- CONTACT ME -->
                    <div class="py-2 md:py-0 flex-1">
                        <div class="text-sm uppercase font-medium">Contact </div>
                        <div class="flex items-center gap-3 my-2">
                            <img src="img/icons/envelope-solid.svg" class="w-5 h-5 dark:filter-white" id="envelope" />
                            <a class="hover:text-indigo-700" id="mlink" href="#mlink">Email</a>
                        </div>
                    </div>
    
    
                    <!-- WORK -->
                    <div class="py-2 md:py-0 flex-1">
                        <div class="text-sm uppercase font-medium">Work</div>
    
                        <p class="mt-2 flex items-center">
                        <div class="flex items-center gap-3" aria-label="LinkedIn">
                            <img src="img/icons/linkedin.svg" class="w-5 h-5 dark:filter-white" id="linkedin">
                            <a href="https://www.linkedin.com/in/marcozausch" class="hover:text-indigo-700">LinkedIn</a>
                        </div>
                        </p>
    
                        <p class="mt-2 flex items-center">
                        <div class="flex items-center gap-3" aria-label="github">
                            <img src="img/icons/github.svg" class="w-5 h-5 dark:filter-white" id="github">
                            <a href="https://github.com/MaCoZu" class="hover:text-indigo-700" aria-label="Github">Github</a>
                        </div>
                        </p>
                    </div>
    
                    <!-- LEGAL -->
                    <div class="py-2 md:py-0 flex-1">
                        <div class="text-sm uppercase font-medium">Legal</div>
                        <a class="mt-2 block hover:text-indigo-700" href="./impressum.html">Impressum</a>
                        <a class="mt-2 block hover:text-indigo-700" href="./privacypolicy.html">Privacy
                            Policy</a>
                    </div>
                </div>
            </div>
    
        </div>
    </footer>

    <!-- D3 Code  -->
    <script>
        // Declare the chart dimensions and margins.
        const width = 850;
        const height = 450;
        const marginTop = 40;
        const marginRight = 30;
        const marginBottom = 90;
        const marginLeft = 90;

        // Canvas
        const canvas = d3.select('.canva');

        const container = canvas.append("div")
            .attr("id", "container")
            .style("display", "flex")
            .style("flex-direction", "row");

        // Container to hold the heading and chart
        const chart = container.append("div")
            .attr("id", "chart-container")
            .style("flex-direction", "column")
            .style("display", "flex") // Align chart and buttons in a row
            .style("align-items", "center"); // Align items to the top

        chart.append("h1")
            .attr("id", "heading")
            .text("Happy & Sustainable?")
            .style("text-align", "center");

        // SVG
        const svg = chart
            .attr("id", "svg-container")
            .append("svg")
            .attr("width", width + marginLeft + marginRight)
            .attr("height", height + marginTop + marginBottom);

        // Chart area with borders
        const g = svg.append("g")
            .attr("id", "g-container")
            .attr("transform", `translate(${marginLeft}, ${marginTop})`);

        //  add a rectangle inside the chart area 
        g.append("rect")
            .attr("id", "rect-container")
            .attr("width", width)
            .attr("height", height);

        // DATA
        d3.csv("./data/happy_gni.csv").then(data => {
            // Parse data
            data.forEach(d => {
                d.Country = d.Country;
                d.Year = +d.Year;
                d.HALE = +d.HALE;
                d['CO₂ pc'] = +d['CO₂ pc'];
                d['Happy Score'] = +d['Happy Score'];
                d['GNI pc PPP$'] = +d['GNI pc PPP$'];
            });


            // SCALER
            const gni = d3.scaleLinear()
                .domain(d3.extent(data, d => d['GNI pc PPP$']))
                .range([5, 40]);

            const happy = d3.scaleLinear()
                .domain(d3.extent(data, d => d['Happy Score']))
                .range([0, width]);

            const co2 = d3.scaleLinear()
                .domain(d3.extent(data, d => d['CO₂ pc']))
                .range([height, 0]);

            function createColorScale(data) {
                return d3.scaleSequential()
                    .domain(d3.extent(data, d => d.HALE))
                    .interpolator(d3.interpolateGnBu);
            }

            const color = createColorScale(data);

            // x-axis 
            g.append("g")
                .attr("transform", `translate(0,${height})`)
                .call(d3.axisBottom(happy).ticks(10, ",f").tickSize(7).tickPadding(15))
                .attr("font-family", "sans-serif")
                .attr("font-size", "14px");

            // x-axis title
            g.append("text")
                .attr("x", width / 2)
                .attr("y", height + 60)
                .style("font-size", "20px")
                .attr("font-family", "sans-serif")
                .style("text-anchor", "middle")
                .text("Happiness Score");

            // y-axis 
            g.append("g")
                .call(d3.axisLeft(co2).ticks(10, ",f").tickSize(7).tickPadding(10))
                .attr("font-family", "sans-serif")
                .attr("font-size", "14px");

            // y-axis title
            g.append("text")
                .attr("transform", `translate(${-60}, ${height / 2}) rotate(-90)`)
                .attr("text-anchor", "middle")
                .attr("font-size", "18px")
                .attr("font-family", "sans-serif")
                .text("CO₂ per capita")
                .style("font-size", "20px");

            // LEGEND
            const legendValues = [1000, 25000, 50000, 75000, 150000];
            const legendTitle = "GNI pc PPP$";

            // Parameters to control the position of the entire legend
            const xLegend = 190;
            const yLegend = 340;

            // Create a container for the entire legend
            const gni_legend = svg.append("g")
                .attr("transform", `translate(${xLegend}, ${yLegend})`); // Move the whole legend

            // Add legend title
            gni_legend.append("text")
                .attr("x", -50) // Relative to the group's xLegend
                .attr("y", -100) // Relative to the group's yLegend
                .text(legendTitle)
                .style("font-size", "18px")
                .attr("font-weight", "bold")
                .attr("font-family", "sans-serif");

            // Add circles to the legend
            gni_legend.selectAll("legend-circle")
                .data(legendValues)
                .join("circle")
                .attr("cx", 0) // Relative to the group's xLegend
                .attr("cy", d => -gni(d))
                .attr("r", d => gni(d))
                .style("fill", "none");

            // Add labels to the legend
            gni_legend.selectAll("legend-label")
                .data(legendValues)
                .join("text")
                .attr("x", (d, i) => 50 + i * 4) // Adjust label x position relative to the circles
                .attr("y", (d, i) => -2 - i * 17) // Align labels with circles
                .text(d => d)
                .attr('alignment-baseline', 'middle');

            // COLOR LEGEND
            const colorLegend = svg.append("g")
                .attr("transform", `translate(${marginLeft + 50}, ${marginTop + height / 7})`);

            const colorScale = d3.scaleSequential(d3.interpolateGnBu)
                .domain(d3.extent(data, d => d.HALE));

            const legendWidth = 250;
            const legendHeight = 20;

            const legendScale = d3.scaleLinear()
                .domain(colorScale.domain())
                .range([0, legendWidth]);

            // Modify the axis to remove end ticks
            const legendAxis = d3.axisBottom(legendScale)
                .ticks(5)
                .tickSize(6)
                .tickFormat((d, i, nodes) => {
                    return d3.format(".0f")(d);
                });

            // Append and style the axis
            const axisGroup = colorLegend.append("g")
                .attr("transform", `translate(0, ${legendHeight})`)
                .call(legendAxis);

            // Remove the domain line
            axisGroup.select(".domain").remove();

            // Style the ticks
            axisGroup.selectAll(".tick line")
                .attr("stroke", "none");


            const legendGradient = colorLegend.append("defs")
                .append("linearGradient")
                .attr("id", "legend-gradient")
                .attr("x1", "0%")
                .attr("y1", "0%")
                .attr("x2", "100%")
                .attr("y2", "0%");

            legendGradient.selectAll("stop")
                .data(colorScale.ticks().map((t, i, n) => ({
                    offset: `${100 * i / (n.length - 1)}%`,
                    color: colorScale(t)
                })))
                .enter().append("stop")
                .attr("offset", d => d.offset)
                .attr("stop-color", d => d.color);

            // Draw the gradient rectangle for the legend
            colorLegend.append("rect")
                .attr("width", legendWidth)
                .attr("height", legendHeight)
                .style("fill", "url(#legend-gradient)");

            // Add label for the legend
            colorLegend.append("text")
                .attr("transform", `translate(${legendWidth / 2}, ${legendHeight - 30})`)
                .style("text-anchor", "middle")
                .style("font-size", "18px")
                .text("Healthy life expectancy (HALE)");

            // TOOLTIP
            const tooltip = d3.select("body").append("div")
                .attr("class", "tooltip")
                .style("opacity", 0);

            function showTooltip(event, d) {
                tooltip.transition()
                    .duration(200)
                    .style("opacity", .9);

                tooltip.html(`
                        <table>
                            <tr><td>Country:</td><td><strong>${d.Country}</strong></td></tr>
                            <tr><td>Year:</td><td><strong>${d.Year}</strong></td></tr>
                            <tr><td>Happiness:</td><td><strong>${d['Happy Score'].toFixed(2)}</strong></td></tr>
                            <tr><td>CO₂ pc:</td><td><strong>${d['CO₂ pc'].toFixed(2)}</strong></td></tr>
                            <tr><td>HALE:</td><td><strong>${d.HALE.toFixed(2)}</strong></td></tr>
                            <tr><td>GNI pc PPP$:</td><td><strong>${d['GNI pc PPP$'].toFixed(0)}</strong></td></tr>
                        </table>
                    `)
                    .attr("class", "tooltip")
                    .style("left", (event.pageX + 10) + "px")
                    .style("top", (event.pageY - 28) + "px");
            }


            function hideTooltip() {
                tooltip.transition()
                    .duration(500)
                    .style("opacity", 0);
            }

            function updateChart(selectedYear) {
                const filteredData = data.filter(d => d.Year == selectedYear);

                // Bind data to circles
                const circles = g.selectAll("circle")
                    .data(filteredData, d => d.Country); // Use 'Country' as the key for data join

                // Remove old circles
                circles.exit().transition() // Transition out exiting circles before removing
                    .duration(1000)
                    .attr("r", 0) // Shrink the radius to 0
                    .remove(); // Remove old circles from the DOM

                // Create new circles for entering data
                const enteringCircles = circles.enter()
                    .append("circle")
                    .attr("r", 0) // Start with radius 0 for entering circles
                    .attr("cx", d => happy(d['Happy Score'])) // Position based on new data
                    .attr("cy", d => co2(d['CO₂ pc']))
                    .style("fill", d => color(d.HALE))
                    .style("stroke", "lightgrey")
                    .on("mouseover", showTooltip)
                    .on("mouseout", hideTooltip)
                    .transition() // Transition the entering circles
                    .duration(1000)
                    .attr("r", d => gni(d['GNI pc PPP$'])); // Transition to the new radius

                // Update existing circles
                circles.merge(enteringCircles) // Merge both entering and updating selection
                    .transition() // Transition the updated circles
                    .duration(1000)
                    .attr("r", d => gni(d['GNI pc PPP$'])) // Update the radius
                    .attr("cx", d => happy(d['Happy Score'])) // Update x position
                    .attr("cy", d => co2(d['CO₂ pc'])); // Update y position
            }

            // YEAR SELECTION
            const years = [...new Set(data.map(d => d.Year))];
            const sortedYears = years.slice().sort((a, b) => a - b);

            // Create a container for the buttons on the right of the chart
            const buttonContainer = container.append("div")
                .attr("id", "button-container")
                .style("display", "flex") // Align the buttons in a row
                .style("flex-direction", "column")
                .style("margin-left", "0px") // space between chart and buttons
                .style("margin-top", "40px")
                .style("align-items", "center")
                .style("position", "relative") // Position relative to the chart container
                .style("z-index", "10");

            // Add buttons for each year
            buttonContainer.selectAll("button")
                .data(sortedYears)
                .enter()
                .append("button")
                .text(d => d) // Set button text to the year
                .attr("class", "year-button")
                .style("margin", "5px 0px") // Add some space between buttons
                .on("click", function (event, d) {
                    updateChart(d); // Call updateChart with the selected year
                });


            // Initialize with 2015 data
            updateChart(2019);

            // Assuming y is your y-scale and `yValue` is the value where you want the reference line
            const yValue = 2; // The y value where you want the reference line

            // Add a horizontal reference line
            g.append("line")
                .attr("id", "ref-line")
                .attr("x1", "0%") // Starting x position of the line
                .attr("x2", "87%") // Ending x position of the line (span full width)
                .attr("y1", co2(yValue)) // y position for both y1 and y2 (in data coordinates)
                .attr("y2", co2(yValue)) // Same y position to make the line horizontal
                // .attr("stroke", "darkolivegreen") // Line color
                .attr("stroke-width", 3) // Line thickness
                .attr("stroke-dasharray", "4 4"); // Optional dashed line

            // Add text label above the line
            g.append("text")
                .attr("id", "ref-label")
                .attr("x", 10) // Center text horizontally or adjust as needed
                .attr("y", co2(yValue) - 10) // Position text slightly above the line
                .style("font-weight", "bold")
                .style("font-size", "16px")
                .text("Sustainable CO2 pc."); // Subscript text; // Text content

        }).catch(error => console.error("Error loading the data:", error));
    </script>

    <script type="module" src="../main.js"></script>
    <script type="module" src="../script.js"></script>

</body>


<script type="module" src="./main.js"></script>
<script type="module" src="./script.js"></script>

</html>