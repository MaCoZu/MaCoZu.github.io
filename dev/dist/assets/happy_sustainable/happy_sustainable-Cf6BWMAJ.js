import{l as X}from"../loadComponents-IR4gVqQb.js";import{r as J,s as P}from"../transform-D0hhaYzD.js";import{c as K,i as B,d as Q,e as U,l as C,a as Y,b as Z,f as tt}from"../axis-d8_a1sG8.js";import{e as h}from"../extent-Ccx1MofX.js";import{i as et}from"../init-BFKUnIhM.js";import{c as nt}from"../dsv-XhNTmijJ.js";import{c as at}from"../colors-Cc3OSVma.js";function rt(){var a=0,s=1,l,p,y,u,d=B,x=!1,b;function o(e){return e==null||isNaN(e=+e)?b:d(y===0?.5:(e=(u(e)-l)*y,x?Math.max(0,Math.min(1,e)):e))}o.domain=function(e){return arguments.length?([a,s]=e,l=u(a=+a),p=u(s=+s),y=l===p?0:1/(p-l),o):[a,s]},o.clamp=function(e){return arguments.length?(x=!!e,o):x},o.interpolator=function(e){return arguments.length?(d=e,o):d};function k(e){return function(c){var i,f;return arguments.length?([i,f]=c,d=e(i,f),o):[d(0),d(1)]}}return o.range=k(Q),o.rangeRound=k(U),o.unknown=function(e){return arguments.length?(b=e,o):b},function(e){return u=e,l=e(a),p=e(s),y=l===p?0:1/(p-l),o}}function ot(a,s){return s.domain(a.domain()).interpolator(a.interpolator()).clamp(a.clamp()).unknown(a.unknown())}function z(){var a=K(rt()(B));return a.copy=function(){return ot(a,z())},et.apply(a,arguments)}const it=a=>J(a[a.length-1]);var ct=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(at);const T=it(ct);function st(a,s,l){const e=P(a).append("div").attr("id","chart-container").style("display","flex").style("flex-direction","column").style("align-items","center").append("svg").attr("width",920).attr("height",580),c=e.append("g").attr("id","g-container").attr("transform","translate(90, 40)");c.append("rect").attr("id","rect-container").attr("width",800).attr("height",450).attr("fill","none").attr("stroke","#ccc"),nt(l).then(i=>{i.forEach(t=>{t.Country=t.Country,t.Year=+t.Year,t.HALE=+t.HALE,t["CO₂ pc"]=+t["CO₂ pc"],t["Happy Score"]=+t["Happy Score"],t["GNI pc PPP$"]=+t["GNI pc PPP$"]});const f=C().domain(h(i,t=>t["GNI pc PPP$"])).range([5,40]),H=C().domain(h(i,t=>t["Happy Score"])).range([0,800]),g=C().domain(h(i,t=>t["CO₂ pc"])).range([450,0]);function F(t){return z().domain(h(t,n=>n.HALE)).interpolator(T)}const R=F(i);c.append("g").attr("transform","translate(0,450)").call(Y(H).ticks(10,",f").tickSize(7).tickPadding(15)).attr("font-family","sans-serif").attr("font-size","14px"),c.append("text").attr("x",800/2).attr("y",510).style("font-size","20px").attr("font-family","sans-serif").style("text-anchor","middle").text("Happiness Score"),c.append("g").call(Z(g).ticks(10,",f").tickSize(7).tickPadding(10)).attr("font-family","sans-serif").attr("font-size","14px"),c.append("text").attr("transform",`translate(-60, ${450/2}) rotate(-90)`).attr("text-anchor","middle").attr("font-size","18px").attr("font-family","sans-serif").text("CO₂ per capita").style("font-size","20px");const I=[1e3,25e3,5e4,75e3,15e4],V="GNI pc PPP$",w=e.append("g").attr("transform","translate(190, 340)");w.append("text").attr("x",-50).attr("y",-100).text(V).style("font-size","18px").attr("font-weight","bold").attr("font-family","sans-serif"),w.selectAll("legend-circle").data(I).join("circle").attr("cx",0).attr("cy",t=>-f(t)).attr("r",t=>f(t)).style("fill","none"),w.selectAll("legend-label").data(I).join("text").attr("x",(t,n)=>50+n*4).attr("y",(t,n)=>-2-n*17).text(t=>t).attr("alignment-baseline","middle");const $=e.append("g").attr("transform",`translate(140, ${40+450/7})`),L=z(T).domain(h(i,t=>t.HALE)),S=250,v=20,_=C().domain(L.domain()).range([0,S]),j=Y(_).ticks(5).tickSize(6).tickFormat((t,n,m)=>tt(".0f")(t)),E=$.append("g").attr("transform",`translate(0, ${v})`).call(j);E.select(".domain").remove(),E.selectAll(".tick line").attr("stroke","none"),$.append("defs").append("linearGradient").attr("id","legend-gradient").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").selectAll("stop").data(L.ticks().map((t,n,m)=>({offset:`${100*n/(m.length-1)}%`,color:L(t)}))).enter().append("stop").attr("offset",t=>t.offset).attr("stop-color",t=>t.color),$.append("rect").attr("width",S).attr("height",v).style("fill","url(#legend-gradient)"),$.append("text").attr("transform",`translate(${S/2}, ${v-30})`).style("text-anchor","middle").style("font-size","18px").text("Healthy life expectancy (HALE)");const A=P("body").append("div").attr("class","tooltip").style("opacity",0);function M(t,n){A.transition().duration(200).style("opacity",.9),A.html(`
                <table>
                    <tr><td>Country:</td><td><strong>${n.Country}</strong></td></tr>
                    <tr><td>Year:</td><td><strong>${n.Year}</strong></td></tr>
                    <tr><td>Happiness:</td><td><strong>${n["Happy Score"].toFixed(2)}</strong></td></tr>
                    <tr><td>CO₂ pc:</td><td><strong>${n["CO₂ pc"].toFixed(2)}</strong></td></tr>
                    <tr><td>HALE:</td><td><strong>${n.HALE.toFixed(2)}</strong></td></tr>
                    <tr><td>GNI pc PPP$:</td><td><strong>${n["GNI pc PPP$"].toFixed(0)}</strong></td></tr>
                </table>
            `).attr("class","tooltip").style("left",t.pageX+10+"px").style("top",t.pageY-28+"px")}function q(){A.transition().duration(500).style("opacity",0)}function N(t){const n=i.filter(r=>r.Year===t),m=c.selectAll("circle").data(n,r=>r.Country);m.exit().transition().duration(1e3).attr("r",0).remove();const W=m.enter().append("circle").attr("r",0).attr("cx",r=>H(r["Happy Score"])).attr("cy",r=>g(r["CO₂ pc"])).style("fill",r=>R(r.HALE)).style("stroke","lightgrey").on("mouseover",M).on("mouseout",q).transition().duration(1e3).attr("r",r=>f(r["GNI pc PPP$"]));m.merge(W).transition().duration(1e3).attr("r",r=>f(r["GNI pc PPP$"])).attr("cx",r=>H(r["Happy Score"])).attr("cy",r=>g(r["CO₂ pc"]))}const D=[...new Set(i.map(t=>t.Year))].slice().sort((t,n)=>t-n),O=P(s).attr("id","button-container").style("display","flex").style("flex-direction","column").style("z-index","10");O.selectAll("button").data(D).enter().append("button").text(t=>t).attr("class","year-button").style("margin","5px 0px").on("click",function(t,n){O.selectAll("button").classed("active",!1),P(this).classed("active",!0),N(n)}),N(2019);const G=2;c.append("line").attr("id","ref-line").attr("x1","0%").attr("x2","87%").attr("y1",g(G)).attr("y2",g(G)).attr("stroke-width",3).attr("stroke-dasharray","4 4"),c.append("text").attr("id","ref-label").attr("x",10).attr("y",g(G)-10).style("font-weight","bold").style("font-size","16px").text("Sustainable CO2 pc.")}).catch(i=>{console.error("Error loading the CSV file:",i)})}st("#happy_graph","#buttons","./happy_gni.csv");const lt=[{name:"navbar",targetId:"navbar"},{name:"footer",targetId:"footer"}];X(lt);
