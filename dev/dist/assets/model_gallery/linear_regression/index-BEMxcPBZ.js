import{l as Y}from"../../loadComponents-IR4gVqQb.js";import{s as v}from"../../transform-D0hhaYzD.js";import{l as z,a as $,b as H}from"../../axis-d8_a1sG8.js";import{m as P}from"../../min-D1slsF82.js";import{m as G}from"../../max-DBeXZoyG.js";import{c as W}from"../../dsv-XhNTmijJ.js";import{l as X}from"../../line-CJFRD-Fx.js";import"../../init-BFKUnIhM.js";function u(o,g){let r=0;if(g===void 0)for(let a of o)(a=+a)&&(r+=a);else{let a=-1;for(let k of o)(k=+g(k,++a,o))&&(r+=k)}return r}function D(o,g,{height:r=400,margin:a={top:10,right:50,bottom:60,left:70}}={}){v(o).select("svg").remove();const b=v(o).node().getBoundingClientRect().width,_=v(o).append("svg").attr("width",b).attr("height",r),h=b-a.left-a.right,s=r-a.top-a.bottom,i=_.append("g").attr("transform",`translate(${a.left},${a.top})`);W("galton_data_reduced.csv").then(d=>{d.forEach(e=>{e.height=+e.height,e.midparents_height=+e.midparents_height});const f=z().domain([P(d,e=>e.midparents_height)-1,G(d,e=>e.midparents_height)+1]).range([0,h]),l=z().domain([P(d,e=>e.height)-1,G(d,e=>e.height)+1]).range([s,0]),y=$(f).tickSize(8).tickPadding(8).tickSizeOuter(0),C=H(l).tickSize(8).tickPadding(10);i.selectAll("line.horizontalGrid").data(l.ticks(10)).enter().append("line").attr("class","horizontalGrid").attr("x1",0).attr("x2",h).attr("y1",e=>l(e)).attr("y2",e=>l(e)).attr("stroke","#ddd").attr("opacity","0.8").attr("stroke-width",.8),i.selectAll("line.verticalGrid").data(f.ticks(10)).enter().append("line").attr("class","verticalGrid").attr("x1",e=>f(e)).attr("x2",e=>f(e)).attr("y1",0).attr("y2",s).attr("stroke","#ddd").attr("opacity","0.8").attr("stroke-width",.8),i.append("g").attr("transform",`translate(0,${s})`).call(y),i.append("g").call(C),i.append("text").attr("class","axis-label").attr("x",h/2).attr("y",s+a.bottom-10).style("text-anchor","middle").style("font-family","sans-serif").text("Parents Average Height"),i.append("text").attr("class","axis-label").attr("transform","rotate(-90)").attr("x",-s/2).attr("y",-a.left+20).style("text-anchor","middle").style("font-family","sans-serif").text("Child Height"),i.selectAll(".dot").data(d).enter().append("circle").attr("class","dot").attr("cx",e=>f(e.midparents_height)).attr("cy",e=>l(e.height)).attr("r",2).style("fill","gray").style("stroke","gray").style("stroke-width",.5);function E(e){const t=e.length,n=u(e,p=>p.midparents_height),c=u(e,p=>p.height),x=u(e,p=>p.midparents_height*p.height),R=u(e,p=>p.midparents_height*p.midparents_height),A=(t*x-n*c)/(t*R-n*n),S=(c-A*n)/t;return{slope:A,intercept:S}}const w=E(d),I=X().x(e=>f(e.midparents_height)).y(e=>l(w.slope*e.midparents_height+w.intercept)),L=i.append("defs").append("clipPath").attr("id","clip").append("rect").attr("x",0).attr("y",0).attr("height",s).attr("width",0);i.append("path").datum(d).attr("class","regression-line").attr("d",I).style("stroke","navy").style("stroke-width",2).attr("clip-path","url(#clip)"),v(g).append("button").style("position","abslute").style("right",h/2+"px").style("top",s+"px").text("Show Regression Line").style("font-family","sans-serif").style("font-size","14px").on("click",()=>{L.transition().duration(2e3).attr("width",h)})}).catch(d=>{console.error("Error loading the CSV file:",d)})}function O(o,{height:g=400,margin:r={top:10,right:50,bottom:60,left:70}}={}){v(o).select("svg").remove();const k=v(o).node().getBoundingClientRect().width,b=v(o).append("svg").attr("width",k).attr("height",g),_=k-r.left-r.right,h=g-r.top-r.bottom,s=b.append("g").attr("transform",`translate(${r.left},${r.top})`);W("galton_data_reduced.csv").then(i=>{i.forEach(t=>{t.x=+t.midparents_height,t.y=+t.height});const d=[P(i,t=>t.x)-1,G(i,t=>t.x)+1],f=[P(i,t=>t.y)-1,G(i,t=>t.y)+1],l=z().domain(d).range([0,_]),y=z().domain(f).range([h,0]),C=t=>t===0?"":t,E=$(l).tickSize(8).tickPadding(8).tickSizeOuter(0),w=H(y).tickSize(8).tickPadding(10).tickFormat(C);s.selectAll("line.horizontalGrid").data(y.ticks(10)).enter().append("line").attr("class","horizontalGrid").attr("x1",0).attr("x2",_).attr("y1",t=>y(t)).attr("y2",t=>y(t)).attr("stroke","#ddd").attr("opacity","0.8").attr("stroke-width",.8),s.selectAll("line.verticalGrid").data(l.ticks(10)).enter().append("line").attr("class","verticalGrid").attr("x1",t=>l(t)).attr("x2",t=>l(t)).attr("y1",0).attr("y2",h).attr("stroke","#ddd").attr("opacity","0.8").attr("stroke-width",.8),s.append("g").attr("transform",`translate(0,${h})`).call(E),s.append("g").call(w),s.append("text").attr("class","axis-label").attr("x",_/2).attr("y",h+r.bottom-10).style("text-anchor","middle").style("font-family","sans-serif").text("Parents Average Height"),s.append("text").attr("class","axis-label").attr("transform","rotate(-90)").attr("x",-h/2).attr("y",-r.left+20).style("text-anchor","middle").style("font-family","sans-serif").text("Child Height");function I(t){const n=t.length,c=u(t,m=>m.x),x=u(t,m=>m.y),R=u(t,m=>m.x*m.y),A=u(t,m=>m.x*m.x),S=(n*R-c*x)/(n*A-c*c),p=(x-S*c)/n;return{slope:S,intercept:p}}function L(t){const n=I(t),c=X().x(x=>l(x.x)).y(x=>y(n.slope*x.x+n.intercept));s.selectAll(".regression-line").data([t]).join("path").attr("class","regression-line").attr("d",c).style("stroke","navy").style("stroke-width",2)}function e(t,n=0){n>=t.length||(s.selectAll(".dot").data(t.slice(0,n+1)).join("circle").attr("class","dot").attr("cx",c=>l(c.x)).attr("cy",c=>y(c.y)).attr("r",3).style("fill","gray").style("opacity",.3).transition().duration(500),setTimeout(()=>e(t,n+1),100),L(t.slice(0,n+1)))}e(i)})}D("#scatter_plot","#button_container",{height:400});function B(){O("#regression_simulation",{height:400})}const j=new IntersectionObserver((o,g)=>{o.forEach(r=>{r.isIntersecting&&(B(),g.unobserve(r.target))})});j.observe(document.getElementById("regression_simulation"));document.getElementById("refresh_regression_simulation").addEventListener("click",o=>{o.preventDefault(),B()});const F=[{name:"navbar",targetId:"navbar"},{name:"footer",targetId:"footer"},{name:"model_drawer",targetId:"model_drawer"}];Y(F);
